<!--[0]-->
<!DOCTYPE html>
<html>
<head>
	<title>Header</title>   
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script> 
	<link rel='stylesheet' type='text/css' href='./css/style.css'>
</head>
<body>
<div class='container'>

	<div class='banner-row'>
		<h1>Cloud Portal Interface Control 2</h1>
	</div>

	<div class = 'container-datasources'>
		<div class = 'new-sources'>
			<p class='new-source'>Please choose a new data source.</p>
			<select id='dataSource' class='new-source'>
				  <option value='nil'>Please select</option>
				  <option value='freeagent'>FreeAgent</option>
				  <option value='xero'>Xero</option>
				  <option value='quickbooks'>QuickBooks</option>
				  <option value='spreadsheet'>Spreadsheet</option>
			</select> 
			<button class='new-source' onclick='addDatasource()'>Add datasource</button>
		</div>

		<div class = 'selected-sources'>


<!--[1]-->
			<div class = 'source-wrapper' id='b1'>
				<h2>FreeAgent</h2>
				<div class='fa-help'>
					<button onclick='faSteps()'>Show steps</button>
					<div id='fa-step-count' class='step-count'>0</div>
					<div id='fa-steps' class='fa-steps'></div>
				</div>
				<div class='fa-container'>
					<button class='btn' onclick='fa_openGoogle()'>Click to start</button>
				</div>
				<div class='fa-container'>
					<p class='boxlabel'>Enter Access Token</p>
					<textarea id='fa-tokenAccess' class='entry-box' rows='1' cols='20'></textarea>
				</div>
				<div class='fa-container'>				
					<p class='boxlabel'>Enter Refresh Token</p>
					<textarea id='fa-tokenRefresh' class='entry-box' rows='1' cols='20'></textarea>
					<button class='btn' onclick='fa-token-submit()'>Submit token</button>	
				</div>
				<div class='fa-container'>
					<button class='btn' onclick='fa-reset'>Reset</button>
				</div>
				<div class='fa-container'>
					<button class='btn' onclick='fa-delete'>Delete source</button>
				</div>
				<div class='clear'></div>	
			</div>
<!--[800]-->		
		</div>
</div>
</body>
</html>






<!--[900]-->
<script>

function faSteps(){
    
	var count = $('#fa-step-count').html();
	var newcount = Number(count)+1;
	if (newcount ==6){newcount = 0}
	$('#fa-step-count').text(newcount);
	$.ajax({
		type: 'POST',
		url: '../fa-steps',
		contentType: 'application/json',
		data: JSON.stringify({txtstring: count}),
		success: function(result){$('#fa-steps').html(result);}
	});	
	
}

function fa_openGoogle(){    
		window.open("https://developers.google.com/oauthplayground/#step3&url=https%3A//&content_type=application/json&http_method=GET&useDefaultOauthCred=unchecked&oauthEndpointSelect=Custom&oauthAuthEndpointValue=https%3A//api.freeagent.com/v2/approve_app&oauthTokenEndpointValue=https%3A//api.freeagent.com/v2/token_endpoint&includeCredentials=unchecked");
}

function addDatasource() {
    var source = $('#dataSource').val();
	$.ajax({
		type: 'POST',
		url: '../newdatasource',
		contentType: 'application/json',
		data: JSON.stringify({txtstring: source}),
		success: function(result){}
	});	
}



function submitData(){	
	var inptxt1 = $('#box1').val();
	$.ajax({
		type: 'POST',
		url: '../submitstring',
		contentType: 'application/json',
		data: JSON.stringify({txtstring: inptxt1}),
		success: function(result){$('#dest').html(result);}
	});	
}

function refreshData(){
	$.ajax({
		type: 'GET',
		url: '../refreshstring',
		contentType: 'application/json',
		data: JSON.stringify({txtstring: 'box1'}),
		success: function(result){$('#dest').html(result);}
	});	
}

function freeagentTokenrefresh(){
	$.ajax({
		type: 'GET',
		url: '../freeagent',
		contentType: 'application/json',
		data: JSON.stringify({txtstring: 'box1'}),
		success: function(result){$('#token-response').html(result);}
	});	
}



//url: 'https://sentiment-profile-dev.eu-gb.mybluemix.net/getstring'
//url: 'http://localhost:3000/getstring'
	
</script>